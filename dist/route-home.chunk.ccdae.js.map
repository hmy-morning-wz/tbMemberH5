{"version":3,"sources":["webpack:///route-home.chunk.ccdae.js","webpack:///./demo/data.json","webpack:///./service/index.js","webpack:///./routes/home/style.css","webpack:///./routes/home/index.js"],"names":["webpackJsonp","150d","module","exports","U5uH","__webpack_exports__","getDataJson","actId","fetch","then","response","json","res","console","log","status","code","data","resultPageJson","indexOf","config","JSON","parse","err","warn","success","ZAL5","iOg+","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Home","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__base__","n","__WEBPACK_IMPORTED_MODULE_2__style__","__WEBPACK_IMPORTED_MODULE_2__style___default","__WEBPACK_IMPORTED_MODULE_3__demo_data_json__","__WEBPACK_IMPORTED_MODULE_3__demo_data_json___default","__WEBPACK_IMPORTED_MODULE_4__service__","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","_temp","_this","_ret","_len","args","Array","_key","this","_Component","apply","concat","state","activityUrl","fetchJson","setState","activityLink","goActUrl","userId","bizScenario","inviterId","sharer","JSAPI","hideLoading","locationUrl","Tracker","click","navigation","pushWindow","toast","componentDidMount","urlParams","getUrlParams","showLoading","window","authSDK","getUserInfo","tag","componentWillUnmount","render","class","style","home","Component"],"mappings":"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","file":"route-home.chunk.ccdae.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"150d\":\n/***/ (function(module, exports) {\n\nmodule.exports = {\"config\":{\"bg_url\":\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/result_bg.png\",\"coupon_name\":\"生活缴费红包\",\"fail_msg1\":\"(同身份证账号、手机号、支付宝、设备皆视为同一账号)\",\"fail_msg2\":\"如有疑问，请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\",\"fail_msg3\":\"请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\",\"to_use_url\":null,\"more_url\":\"https://www.taobao.com\",\"new_coupon\":{\"price\":\"10\",\"title\":\"文案\",\"url\":\"https://www.taobao.com\",\"bg\":\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/rpk_bg.png\"}}}\n\n/***/ }),\n\n/***/ \"U5uH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getDataJson;\nfunction getDataJson(actId) {\n\treturn fetch('https://operation.allcitygo.com/oper-act-tmall/tmallActivity/getResultPageJson?activityId=' + actId).then(function (response) {\n\t\treturn response.json();\n\t}).then(function (res) {\n\t\tconsole.log('fetch getDataJson', res);\n\t\tif (res.status === 200 || res.code === '20000') {\n\t\t\tvar data = res.data || {};\n\t\t\t/*\r\n   {\"code\":\"20000\",\"msg\":\"Success\",\"data\":{\"activityId\":346,\"activityTmallId\":1,\"name\":\"测试\",\"startTime\":\"2019-09-10 01:47:30\",\"endTime\":\"2019-09-17 01:47:30\",\"status\":2,\"sellerId\":\"string\",\"targetNumber\":3000,\"linkType\":1,\"activityLink\":\"string\",\"resultPageTemplate\":3,\"resultPageJson\":\"{\\n    \\\"config\\\": {\\n      \\\"bg_url\\\": \\\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/result_bg.png\\\",\\n      \\\"coupon_name\\\": \\\"生活缴费红包\\\",\\n      \\\"fail_msg1\\\": \\\"(同身份证账号、手机号、支付宝、设备皆视为同一账号)\\\",\\n      \\\"fail_msg2\\\": \\\"如有疑问，请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\\\",\\n      \\\"fail_msg3\\\": \\\"请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\\\",\\n      \\\"to_use_url\\\": \\\"https://www.taobao.com\\\",\\n      \\\"more_url\\\": \\\"https://www.taobao.com\\\",\\n      \\\"new_coupon\\\":{\\n        \\\"price\\\":\\\"10\\\",\\n        \\\"title\\\":\\\"文案\\\",\\n        \\\"url\\\":\\\"https://www.taobao.com\\\",\\n        \\\"bg\\\": \\\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/rpk_bg.png\\\"\\n    }\\n}\\n  }\",\"equityType\":1,\"equityId\":\"1231\",\"whiteList\":\"string\",\"gmtCreate\":null,\"gmtModified\":null}}\r\n   */try {\n\t\t\t\tif (res.data && typeof res.data.resultPageJson === 'string' && res.data.resultPageJson.indexOf('{') === 0) {\n\t\t\t\t\tdata.config = JSON.parse(res.data.resultPageJson).config;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.warn(err);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tdata: data || {}\n\t\t\t};\n\t\t}\n\t\treturn res;\n\t});\n}\n\n/***/ }),\n\n/***/ \"ZAL5\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__2Q5nZ\"};\n\n/***/ }),\n\n/***/ \"iOg+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Home; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__base__ = __webpack_require__(\"qkdn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__style__ = __webpack_require__(\"ZAL5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_data_json__ = __webpack_require__(\"150d\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_data_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__demo_data_json__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__service__ = __webpack_require__(\"U5uH\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar Home = function (_Component) {\n\t_inherits(Home, _Component);\n\n\tfunction Home() {\n\t\tvar _temp, _this, _ret;\n\n\t\t_classCallCheck(this, Home);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = { activityUrl: null }, _this.fetchJson = function (actId) {\n\n\t\t\tconsole.log('fetchJson', _this.state, __WEBPACK_IMPORTED_MODULE_3__demo_data_json___default.a);\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_4__service__[\"a\" /* getDataJson */])(actId).then(function (res) {\n\t\t\t\tvar config = __WEBPACK_IMPORTED_MODULE_3__demo_data_json___default.a.config || {};\n\t\t\t\tif (res && res.success && res.data) {\n\t\t\t\t\t_extends(config, res.data.config || {});\n\t\t\t\t\tvar activity_url = res.data.activityLink;\n\t\t\t\t\t_this.setState({ activityUrl: activity_url });\n\t\t\t\t}\n\n\t\t\t\t_this.goActUrl();\n\t\t\t});\n\t\t}, _this.goActUrl = function () {\n\t\t\tconsole.log('goActUrl', _this.state);\n\t\t\tvar _this$state = _this.state,\n\t\t\t    userId = _this$state.userId,\n\t\t\t    actId = _this$state.actId,\n\t\t\t    activityUrl = _this$state.activityUrl,\n\t\t\t    bizScenario = _this$state.bizScenario,\n\t\t\t    inviterId = _this$state.inviterId,\n\t\t\t    sharer = _this$state.sharer;\n\n\t\t\t__WEBPACK_IMPORTED_MODULE_1__base__[\"a\" /* JSAPI */].hideLoading();\n\t\t\tif (activityUrl && activityUrl.indexOf('http') >= 0 && userId && userId !== 'underfined') {\n\t\t\t\t//let url = 'https://pages.tmall.com/wow/pegasus/test-site/681695/cE1491';\n\t\t\t\tvar locationUrl = activityUrl + '?activityId=' + actId + '&userId=' + userId + '&bizScenario=' + bizScenario;\n\t\t\t\tif (inviterId) {\n\t\t\t\t\tlocationUrl = locationUrl + '&inviterId=' + inviterId;\n\t\t\t\t}\n\t\t\t\tif (sharer) {\n\t\t\t\t\tlocationUrl = locationUrl + '&sharer=' + sharer;\n\t\t\t\t}\n\t\t\t\tTracker.click('跳转入会链接', { locationUrl: locationUrl, actId: actId }, function () {\n\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_1__base__[\"c\" /* navigation */].pushWindow(locationUrl, true);\n\t\t\t\t});\n\t\t\t\t//location.replace(locationUrl);\n\t\t\t} else {\n\t\t\t\tconsole.warn('goActUrl error', activityUrl, userId);\n\t\t\t\tTracker.click('不能跳转入会链接', { activityUrl: activityUrl });\n\t\t\t\tif (!activityUrl) {\n\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_1__base__[\"a\" /* JSAPI */].toast('系统开小差了，找不到入口了');\n\t\t\t\t} else {\n\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_1__base__[\"a\" /* JSAPI */].toast('系统开小差了，请稍后再试');\n\t\t\t\t}\n\t\t\t}\n\t\t}, _temp), _possibleConstructorReturn(_this, _ret);\n\t}\n\n\t// gets called when this route is navigated to\n\tHome.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _this2 = this;\n\n\t\tvar urlParams = __WEBPACK_IMPORTED_MODULE_1__base__[\"c\" /* navigation */].getUrlParams();\n\t\tconsole.log('urlParams', urlParams);\n\t\t__WEBPACK_IMPORTED_MODULE_1__base__[\"a\" /* JSAPI */].showLoading('加载中');\n\n\t\tvar _ref = urlParams || {},\n\t\t    actId = _ref.actId,\n\t\t    bizScenario = _ref.bizScenario,\n\t\t    inviterId = _ref.inviterId,\n\t\t    sharer = _ref.sharer;\n\n\t\tthis.setState({ actId: actId, bizScenario: bizScenario, inviterId: inviterId, sharer: sharer });\n\t\twindow.authSDK.getUserInfo(function (res) {\n\t\t\tconsole.log(res);\n\t\t\tTracker.log({ tag: 'authSDK-getUserInfo', res: res });\n\t\t\tres && (_this2.setState({ userId: res.userId }), _this2.fetchJson(actId));\n\t\t});\n\t};\n\n\t// gets called just before navigating away from the route\n\n\n\tHome.prototype.componentWillUnmount = function componentWillUnmount() {};\n\n\tHome.prototype.render = function render() {\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { 'class': __WEBPACK_IMPORTED_MODULE_2__style___default.a.home });\n\t};\n\n\treturn Home;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-home.chunk.ccdae.js","module.exports = {\"config\":{\"bg_url\":\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/result_bg.png\",\"coupon_name\":\"生活缴费红包\",\"fail_msg1\":\"(同身份证账号、手机号、支付宝、设备皆视为同一账号)\",\"fail_msg2\":\"如有疑问，请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\",\"fail_msg3\":\"请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\",\"to_use_url\":null,\"more_url\":\"https://www.taobao.com\",\"new_coupon\":{\"price\":\"10\",\"title\":\"文案\",\"url\":\"https://www.taobao.com\",\"bg\":\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/rpk_bg.png\"}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demo/data.json\n// module id = 150d\n// module chunks = 0 1","export function getDataJson(actId){\r\n\treturn fetch(`https://operation.allcitygo.com/oper-act-tmall/tmallActivity/getResultPageJson?activityId=${actId}`)\r\n\t\t.then((response) => response.json())\r\n\t\t.then((res) => {\r\n\t\t\tconsole.log('fetch getDataJson',res);\r\n\t\t\tif (res.status===200 || res.code=== '20000'){\r\n\t\t\t\tlet data =res.data || {};\r\n\t\t\t\t/*\r\n\t\t{\"code\":\"20000\",\"msg\":\"Success\",\"data\":{\"activityId\":346,\"activityTmallId\":1,\"name\":\"测试\",\"startTime\":\"2019-09-10 01:47:30\",\"endTime\":\"2019-09-17 01:47:30\",\"status\":2,\"sellerId\":\"string\",\"targetNumber\":3000,\"linkType\":1,\"activityLink\":\"string\",\"resultPageTemplate\":3,\"resultPageJson\":\"{\\n    \\\"config\\\": {\\n      \\\"bg_url\\\": \\\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/result_bg.png\\\",\\n      \\\"coupon_name\\\": \\\"生活缴费红包\\\",\\n      \\\"fail_msg1\\\": \\\"(同身份证账号、手机号、支付宝、设备皆视为同一账号)\\\",\\n      \\\"fail_msg2\\\": \\\"如有疑问，请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\\\",\\n      \\\"fail_msg3\\\": \\\"请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助\\\",\\n      \\\"to_use_url\\\": \\\"https://www.taobao.com\\\",\\n      \\\"more_url\\\": \\\"https://www.taobao.com\\\",\\n      \\\"new_coupon\\\":{\\n        \\\"price\\\":\\\"10\\\",\\n        \\\"title\\\":\\\"文案\\\",\\n        \\\"url\\\":\\\"https://www.taobao.com\\\",\\n        \\\"bg\\\": \\\"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/rpk_bg.png\\\"\\n    }\\n}\\n  }\",\"equityType\":1,\"equityId\":\"1231\",\"whiteList\":\"string\",\"gmtCreate\":null,\"gmtModified\":null}}\r\n\t\t*/      try {\r\n\t\t\t\t if (res.data && typeof res.data.resultPageJson ==='string' && res.data.resultPageJson.indexOf('{')===0){\r\n\t\t\t\t\t\tdata.config = JSON.parse(  res.data.resultPageJson ).config;\r\n\t\t\t\t }\r\n\t\t\t    }\r\n\t\t\t\tcatch (err){\r\n\t\t\t\t\tconsole.warn(err);\r\n\t\t\t   }\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\tdata: data||{}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t\t\r\n\t\t      \r\n\t\t});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./service/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__2Q5nZ\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/home/style.css\n// module id = ZAL5\n// module chunks = 1","import { h, Component } from 'preact';\r\nimport { navigation ,JSAPI } from '../../base';\r\nimport style from './style';\r\nimport data from '../../demo/data.json';\r\nimport { getDataJson } from '../../service';\r\nexport default class Home extends Component {\r\n\tstate = { activityUrl: null }\r\n\tfetchJson =(actId) => {\r\n\t\t\r\n\t\tconsole.log('fetchJson',this.state,data);\r\n\t\tgetDataJson(actId).then((res) => {\r\n\t\t\tlet config = data.config || {};\r\n\t\t\tif (res && res.success && res.data){\r\n\t\t\t\tObject.assign(config,res.data.config || {});\r\n\t\t\t\tlet activity_url = res.data.activityLink;\r\n\t      this.setState({ activityUrl: activity_url });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.goActUrl();\r\n\t\t});\r\n\t\r\n\t\t\r\n\t}\r\n\r\n\tgoActUrl = () => {\r\n\t\tconsole.log('goActUrl',this.state);\r\n\t\tlet { userId,actId,activityUrl ,bizScenario,inviterId ,sharer} = this.state;\r\n\t\tJSAPI.hideLoading();\r\n\t\tif (activityUrl && activityUrl.indexOf('http') >=0  && userId && userId!=='underfined'){\r\n\t\t//let url = 'https://pages.tmall.com/wow/pegasus/test-site/681695/cE1491';\r\n\t\t\tlet locationUrl= `${activityUrl}?activityId=${actId}&userId=${userId}&bizScenario=${bizScenario}`;\r\n\t\t\tif(inviterId) {\r\n\t\t\t\tlocationUrl = locationUrl+'&inviterId='+inviterId\r\n\t\t\t}\r\n\t\t\tif(sharer) {\r\n\t\t\t\tlocationUrl = locationUrl+'&sharer='+sharer\r\n\t\t\t}\r\n\t\t\tTracker.click('跳转入会链接', { locationUrl,actId },() => {\r\n\t\t\t\tnavigation.pushWindow(locationUrl,true);\r\n\t\t\t});\r\n\t\t\t//location.replace(locationUrl);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.warn('goActUrl error',activityUrl,userId);\r\n\t\t\tTracker.click('不能跳转入会链接', { activityUrl });\r\n\t\t\tif ((!activityUrl)){\r\n\t\t\t\tJSAPI.toast('系统开小差了，找不到入口了');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tJSAPI.toast('系统开小差了，请稍后再试');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// gets called when this route is navigated to\r\n\tcomponentDidMount() {\r\n\t    let urlParams = navigation.getUrlParams();\r\n\t\tconsole.log('urlParams',urlParams);\r\n\t\tJSAPI.showLoading('加载中');\r\n\t\tlet { actId,bizScenario,inviterId,sharer } = urlParams || {};\r\n\t\tthis.setState({ actId,bizScenario,inviterId ,sharer});\r\n\t\twindow.authSDK.getUserInfo((res) => {\r\n\t\t\tconsole.log(res);\r\n\t\t\tTracker.log({ tag: 'authSDK-getUserInfo', res });\r\n\t\t\tres && (this.setState({ userId: res.userId }),this.fetchJson(actId));\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t// gets called just before navigating away from the route\r\n\tcomponentWillUnmount() {\r\n\t\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <div class={style.home} />;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./routes/home/index.js"],"sourceRoot":""}