webpackJsonp([0],{"150d":function(t){t.exports={config:{bg_url:"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/result_bg.png",coupon_name:"生活缴费红包",fail_msg1:"(同身份证账号、手机号、支付宝、设备皆视为同一账号)",fail_msg2:"如有疑问，请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助",fail_msg3:"请关注“众城通”支付宝生活号，回复“Babycare”获取客服帮助",to_use_url:null,more_url:"https://www.taobao.com",new_coupon:{price:"10",title:"文案",url:"https://www.taobao.com",bg:"https://img-citytsm.oss-cn-hangzhou.aliyuncs.com/image/tb/rpk_bg.png"}}}},"1VKv":function(t,e,o){t.exports=o.p+"9923348b18f7e1e5c93a230dee9951e0.png"},"4Dw4":function(t){t.exports={packet_container:"packet_container__QpO9h",money_header:"money_header__rfEwU",header:"header__27Qaa",title_text:"title_text__3j2JW",text_redbag:"text_redbag__23E-q",text_desc:"text_desc__2hB0c",btn_touse:"btn_touse__1ec_f",btn_more:"btn_more__1aoON",title:"title__sc4SK",msg_box:"msg_box__3mmEg",new_coupon_box:"new_coupon_box__1O8dA",left_box:"left_box__FA0Vd",right_box:"right_box__2qMkY",qiang:"qiang__31rUV",price:"price__3eL02",btn_success:"btn_success__1tUfD",btn_focus:"btn_focus__2uPwZ",btn_default:"btn_default__31mMs",packet_footer:"packet_footer__3FUXw",tip:"tip__3RTP4",quan:"quan__382xE"}},PPPf:function(t,e,o){t.exports=o.p+"4662aa0124e59b3fd176c5b8f9c5e5e4.png"},T3sF:function(t,e,o){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),o.d(e,"default",function(){return C});var s=o("KM04"),c=(o.n(s),o("4Dw4")),i=o.n(c),r=o("qkdn"),l=o("U5uH"),u=o("PPPf"),_=o.n(u),p=o("srBq"),h=o.n(p),g=o("1VKv"),d=o.n(g),f=o("150d"),b=o.n(f),m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},w="SUCCESS",O="FAIL_DONE",y="FAIL_NOT_ALLOW",v=b.a.config.fail_msg1,U=b.a.config.fail_msg2,k=b.a.config.fail_msg3,j=b.a.config.coupon_name,x=Object(s.h)("img",{src:_.a}),C=function(t){function e(){for(var e,o,a,s=arguments.length,c=Array(s),i=0;i<s;i++)c[i]=arguments[i];return e=o=n(this,t.call.apply(t,[this].concat(c))),o.state={code:null,title:"",message:"",price:0,helpMessage:"",bgImage:"",couponUrl:"",toUseUrl:"",newCoupon:{}},o.handleCoupon=function(){Tracker.click("结果页面-更多福利",{toUrl:o.state.couponUrl},function(){o.state.couponUrl&&r.c.pushWindow(o.state.couponUrl,!1)})},o.handleToUse=function(){Tracker.click("结果页面-立即使用",{toUrl:o.state.toUseUrl},function(){o.state.toUseUrl&&r.c.pushWindow(o.state.toUseUrl,!1)})},o.handleNewCoupon=function(){Tracker.click("结果页面-底部-抢红包",{toUrl:o.state.newCoupon.url},function(){o.state.newCoupon.url&&r.c.pushWindow(o.state.newCoupon.url,!1)})},o.handleHelp=function(){},o.fetchJson=function(t){console.log("fetchJson",o.state,b.a),Object(l.a)(t).then(function(t){console.log("getDataJson res",t);var e=b.a.config||{};t&&t.success&&t.data&&m(e,t.data.config||{});var n=o.state.code;v=e.fail_msg1,U=e.fail_msg2,k=e.fail_msg3,j=e.coupon_name;var a=n===w?j:n===O?v:n===y?U:"",s=e.bg_url,c=e.to_use_url,i=e.more_url,l=e.new_coupon;if(l&&"string"==typeof l&&l.indexOf("{")>-1)try{l=JSON.parse(l)}catch(t){}o.setState({helpMessage:a,bgImage:s,toUseUrl:c,couponUrl:i,newCoupon:l}),console.log("getDataJson",e,o.state),r.a.hideLoading()}).catch(function(){r.a.hideLoading(),r.a.toast("系统开小差了，请稍后再试")})},a=e,n(o,a)}return a(e,t),e.prototype.componentDidMount=function(){var t=this;r.a.showLoading("加载中");var e=r.c.getUrlParams();console.log("urlParams",e);var o=e||{},n=o.code,a=o.title,s=o.message,c=o.price,i=o.actId;a=a||(n===w?"恭喜获得":"ERROR"===n||"FAIL"===n?"哎呦":"抱歉"),s=s||(n===w?"":n===O?"您已参加过活动":n===y?"您非本次活动渠道的关注用户":"来晚了，券已领完"),this.setState({urlParams:e,code:n,title:a,message:s,price:c,actId:i}),window.authSDK.getUserInfo(function(e){console.log(e),Tracker.log({tag:"authSDK-getUserInfo",res:e}),e&&t.setState({userId:e.userId}),Tracker.click("打开结果页面-"+n,{code:n,title:a,message:s})}),this.fetchJson(i),document.addEventListener("back",function(){window.history.length>1&&window.AlipayJSBridge&&window.AlipayJSBridge.call("popWindow")},!1)},e.prototype.componentWillUnmount=function(){},e.prototype.render=function(){return Object(s.h)("div",{class:i.a.packet_container},Object(s.h)("img",{class:this.state.bgImage?"":"hide",style:"background:#F25917",src:Object(r.b)(this.state.bgImage,750,1206)}),Object(s.h)("div",{class:i.a.title_text},this.state.title),Object(s.h)("div",{class:this.state.code===w&&this.state.price?i.a.money_header:i.a.header},this.state.code===w?this.state.price:this.state.message),Object(s.h)("div",{class:i.a.text_redbag},this.state.helpMessage),Object(s.h)("div",{class:this.state.code===w&&this.state.toUseUrl?i.a.btn_touse:"hide",onClick:this.handleToUse},x),Object(s.h)("div",{class:"ERROR"!==this.state.code?i.a.btn_more:"hide",onClick:this.handleCoupon,style:"background-image: url("+h.a+") ; background-size: 100%  100% ;"},Object(s.h)("div",{class:i.a.title},"更多福利")),Object(s.h)("div",{class:"ERROR"!==this.state.code?i.a.msg_box:"hide",onClick:this.handleHelp,style:"background-image: url("+d.a+") ; background-size: 100%  100% ;"},Object(s.h)("div",{class:i.a.title})),Object(s.h)("div",{class:this.state.newCoupon&&this.state.newCoupon.title&&this.state.newCoupon.bg?i.a.new_coupon_box:"hide",onClick:this.handleNewCoupon,style:"background-image: url("+Object(r.b)(this.state.newCoupon.bg)+") ; background-size: 100%  100% ;"},Object(s.h)("div",{class:i.a.left_box},Object(s.h)("div",{class:i.a.title},this.state.newCoupon.price)),Object(s.h)("div",{class:i.a.right_box},Object(s.h)("div",{class:i.a.title},this.state.newCoupon.title),Object(s.h)("div",{class:i.a.qiang},"抢"))))},e}(s.Component)},U5uH:function(t,e){"use strict";function o(t){return fetch("https://operation.allcitygo.com/oper-act-tmall/tmallActivity/getResultPageJson?activityId="+t).then(function(t){return t.json()}).then(function(t){if(console.log("fetch getDataJson",t),200===t.status||"20000"===t.code){var e=t.data||{};try{t.data&&"string"==typeof t.data.resultPageJson&&0===t.data.resultPageJson.indexOf("{")&&(e.config=JSON.parse(t.data.resultPageJson).config)}catch(t){console.warn(t)}return{success:!0,data:e||{}}}return t})}e.a=o},srBq:function(t,e,o){t.exports=o.p+"560a01598c88aa3539f6eb0b287e1fa9.png"}});
//# sourceMappingURL=route-result.chunk.06710.js.map